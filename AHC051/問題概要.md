# AHC051 - Probabilistic Waste Sorting 問題概要

## 問題設定
- N種類のごみを確率的に分別する処理場を設計する問題
- 2次元平面（0≤x,y≤10^4）上に装置を配置
- ごみ搬入口(0,5000)から処理装置まで、分別器とベルトコンベアで経路を構築

## 要素
### 処理装置
- N個（各ごみ種類に1つずつ）
- N箇所の設置場所から選択して配置

### 分別器
- K種類の分別器が利用可能（同じものを複数使用可）
- M箇所の設置場所に配置可能
- 各分別器はごみを確率的に2つの出口に振り分け
  - 分別器iが種類jのごみを出口1に送る確率: p[i,j]
  - 出口2に送る確率: 1-p[i,j]

### ベルトコンベア
- 搬入口・分別器の出口から処理装置・他の分別器へ接続
- 制約：
  - 端点を共有しない線分は交差不可
  - 有向グラフに閉路があってはならない

## 目的
各ごみが正しい処理装置に運ばれる確率q[i]を最大化
- スコア: 10^9 × (1/N) × Σ(1-q[i])（小さいほど良い）

## 制約
- N: 5～20（ごみ種類数）
- M: 10N～50N（分別器設置場所数）
- K: N～4N（分別器種類数）
- p[i,j]: 0～1の実数（分別確率）

## 入出力
### 入力
- N, M, K
- 処理装置設置場所の座標（N個）
- 分別器設置場所の座標（M個）
- 分別確率p[i,j]（K×N個）

### 出力
- 処理装置の配置（どの設置場所にどの種類の処理装置を置くか）
- 搬入口からの接続先
- 各分別器設置場所の状態（未使用/-1、または使用する分別器番号と2つの出口の接続先）

## 重要なポイント
- 確率的な分別のため、複数の分別器を組み合わせて精度を上げる必要がある
- ベルトコンベアの交差判定に注意（整数演算で誤差なし）
- 相対評価スコアで順位が決まる